# Components v2 éŒ¯èª¤è¨Šæ¯ç³»çµ±

## æ¦‚è¿°

å°‡éŒ¯èª¤è¨Šæ¯ç³»çµ±å¾å‚³çµ±çš„ Embed å‡ç´šåˆ° Discord Components v2ï¼Œæä¾›æ›´å¥½çš„è¦–è¦ºæ•ˆæœå’Œæ›´éˆæ´»çš„å…§å®¹é¡¯ç¤ºã€‚

## ä¸»è¦æ”¹é€²

### 1. ä½¿ç”¨ Components v2 Container

- ä½¿ç”¨ `ContainerBuilder` å’Œ `TextDisplayBuilder` æ›¿ä»£ `EmbedBuilder`
- æ”¯æ´æ›´é•·çš„å…§å®¹ï¼ˆ4000 å­—å…ƒ vs 2048 å­—å…ƒï¼‰
- æ›´å¥½çš„è¦–è¦ºå±¤æ¬¡å’Œæ’ç‰ˆ

### 2. æ”¹å–„éŒ¯èª¤è™•ç†é‚è¼¯

åœ¨ `errorHandler.ts` çš„ `sendErrorResponse` å‡½æ•¸ä¸­ï¼š

- æ›´ç²¾ç¢ºçš„ interaction ç‹€æ…‹æª¢æŸ¥
- æ ¹æ“šç‹€æ…‹é¸æ“‡æ­£ç¢ºçš„å›æ‡‰æ–¹æ³•ï¼š
  - `replied`: ä½¿ç”¨ `followUp()`
  - `deferred`: ä½¿ç”¨ `editReply()`
  - æœªå›æ‡‰: ä½¿ç”¨ `reply()`
- æ›´å¥½çš„éŒ¯èª¤æ—¥èªŒè¨˜éŒ„

### 3. è¦–è¦ºæ”¹é€²

æ¯ç¨®éŒ¯èª¤é¡å‹éƒ½æœ‰å°æ‡‰çš„ï¼š
- é¡è‰²ä¸»é¡Œï¼ˆaccent colorï¼‰
- è¡¨æƒ…ç¬¦è™Ÿåœ–ç¤º
- æ ¼å¼åŒ–çš„å…§å®¹é¡¯ç¤º

éŒ¯èª¤é¡å‹å°æ‡‰ï¼š
- âŒ ä¸€èˆ¬éŒ¯èª¤ï¼ˆç´…è‰² #ED4245ï¼‰
- â³ å†·å»æ™‚é–“ï¼ˆè—è‰² #5865F2ï¼‰
- âš ï¸ æ¥­å‹™é‚è¼¯éŒ¯èª¤ï¼ˆé»ƒè‰² #FAA61Aï¼‰
- ğŸ”’ æ¬Šé™ä¸è¶³ï¼ˆç´…è‰²ï¼‰
- ğŸ”§ å…§éƒ¨/Discord éŒ¯èª¤ï¼ˆç´…è‰²ï¼‰
- ğŸ›¡ï¸ è‡ªå‹•å¯©æ ¸æ””æˆªï¼ˆç´…è‰²ï¼‰

## æ¸¬è©¦

ä½¿ç”¨ `/test-error` å‘½ä»¤ï¼ˆåƒ…ç®¡ç†å“¡ï¼‰æ¸¬è©¦ä¸åŒé¡å‹çš„éŒ¯èª¤è¨Šæ¯ï¼š

1. æ¥­å‹™é‚è¼¯éŒ¯èª¤
2. å…§éƒ¨éŒ¯èª¤
3. å†·å»æ™‚é–“
4. æ¬Šé™ä¸è¶³

## æŠ€è¡“ç´°ç¯€

### ä¿®æ”¹çš„æª”æ¡ˆ

1. `src/utils/replyHelper.ts`
   - å°‡ `createReply()` æ”¹ç”¨ Components v2
   - ä½¿ç”¨ `ContainerBuilder` å’Œ `TextDisplayBuilder`
   - æ·»åŠ  `MessageFlags.IsComponentsV2` æ¨™è¨˜

2. `src/utils/errorHandler.ts`
   - æ”¹å–„ `sendErrorResponse()` çš„ interaction ç‹€æ…‹æª¢æŸ¥
   - æ›´å¥½çš„éŒ¯èª¤è™•ç†å’Œæ—¥èªŒè¨˜éŒ„
   - é˜²æ­¢éŒ¯èª¤è™•ç†å™¨æœ¬èº«é€ æˆæ›´å¤šéŒ¯èª¤

3. æ–°å¢æ¸¬è©¦å·¥å…·ï¼š
   - `src/commands/admin/test-error/index.ts` - æ¸¬è©¦å‘½ä»¤
   - `src/interactions/buttons/testErrorButton.ts` - æ¸¬è©¦æŒ‰éˆ•

### ç›¸å®¹æ€§

- éœ€è¦ Discord.js 14.21.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- æ‰€æœ‰éŒ¯èª¤è¨Šæ¯è‡ªå‹•ä½¿ç”¨ Components v2
- å‘å¾Œç›¸å®¹ï¼Œä¸å½±éŸ¿ç¾æœ‰åŠŸèƒ½

## å·²è§£æ±ºçš„å•é¡Œ

- âœ… ä¿®å¾© "Interaction has already been acknowledged" éŒ¯èª¤
- âœ… é˜²æ­¢éŒ¯èª¤è™•ç†å™¨é€ æˆç´šè¯éŒ¯èª¤
- âœ… æ”¹å–„éŒ¯èª¤è¨Šæ¯çš„è¦–è¦ºå‘ˆç¾
- âœ… æ”¯æ´æ›´é•·çš„éŒ¯èª¤è¨Šæ¯å…§å®¹
